# SQL queries: 

| Metric                             | Query                                                                                                                                                                                                                       | Result                                                                                 |
|------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
| **Total Loan Applications**        | `SELECT COUNT(id) AS 'Total_Loan_applications' FROM dbo.bank_loan_data;`                                                                                                                                                     | ![Alt Text](./queries-ss-folder/Total_Loan_applications.png)                                  |
| **MTD Loan Applications**          | `SELECT COUNT(id) AS MTD_Loan_Applications FROM dbo.bank_loan_data WHERE Month(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![MTD_loan_applications](./queries-ss-folder/MTD_loan_applications.png)                       |
| **PMTD Loan Applications**         | `SELECT COUNT(id) AS PMTD_Total_Loan_Applications FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) - 1 AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![PMTD_Loan_applications](./queries-ss-folder/PMTD_Loan_applications.png)                     |
| **Total Funded Amount**            | `SELECT SUM(loan_amount) as Total_Funded_Amount FROM dbo.bank_loan_data;`                                                                                                                                                   | ![Total_funded_amount](./queries-ss-folder/Total_funded_amount.png)                          |
| **MTD Funded Amount**              | `SELECT SUM(loan_amount) AS MTD_Funded_Amount FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM bank_loan_data);` | ![MTD_funded_amount](./queries-ss-folder/MTD_funded_amount.png)                              |
| **PMTD Funded Amount**             | `SELECT SUM(loan_amount) AS PMTD_Funded_Amount FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) - 1 AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM bank_loan_data);` | ![PMTD_funded_amount](./queries-ss-folder/PMTD_funded_amount.png)                            |
| **Total Amount Received**          | `SELECT SUM(total_payment) as Total_Amount_Received FROM dbo.bank_loan_data;`                                                                                                                                               | ![Total_amount_received](./queries-ss-folder/Total_amount_received.png)                      |
| **MTD Amount Received**            | `SELECT SUM(total_payment) as MTD_Amount FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![MTD_Amount_Received](./queries-ss-folder/MTD_Amount_Received.png)                          |
| **PMTD Amount Received**           | `SELECT SUM(total_payment) as PMTD_Amount_Received FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) - 1 AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![PMTD_amount_received](./queries-ss-folder/PMTD_amount_received.png)                        |
| **AVG Interest Rate**              | `SELECT AVG(int_rate)*100 AS AVG_interest_rate FROM dbo.bank_loan_data;`                                                                                                                                                   | ![Avg_int_rate](./queries-ss-folder/Avg_int_rate.png)                                        |
| **MTD Avg Interest Rate**          | `SELECT AVG(int_rate)*100 AS AVG_MTD_interest_rate FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![MTD_avg_int_rate](./queries-ss-folder/MTD_avg_int_rate.png)                                |
| **PMTD Avg Interest Rate**         | `SELECT AVG(int_rate)*100 AS AVG_PMTD_interest_rate FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) - 1 AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![PMTD_avg_int_rate](./queries-ss-folder/PMTD_avg_int_rate.png)                              |
| **AVG DTI**                         | `SELECT AVG(dti)*100 AS AVG_dti FROM dbo.bank_loan_data;`                                                                                                                                                                | ![Avg_dti](./queries-ss-folder/Avg_dti.png)                                                  |
| **MTD DTI**                         | `SELECT AVG(dti)*100 AS AVG_MTD_dti FROM dbo.bank_loan_data WHERE MONTH(issue_date) = 12;`                                                                                                                                 | ![MTD_avg_dti](./queries-ss-folder/MTD_avg_dti.png)                                          |
| **PMTD DTI**                        | `SELECT AVG(dti)*100 AS AVG_PMTD_dti FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) - 1 AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data);` | ![PMTD_dti](./queries-ss-folder/PMTD_dti.png)                                                |
| **Good Loan Percentage**           | `SELECT(COUNT(CASE WHEN loan_status = 'Fully Paid' OR loan_status = 'Current' THEN id END)*100.0)/COUNT(id) AS good_loan_percentage FROM dbo.bank_loan_data;`                                                               | ![good_loan_percentage](./queries-ss-folder/good_loan_percentage.png)                       |
| **Good Loan Applications**         | `SELECT(COUNT( CASE WHEN loan_status = 'Fully Paid' OR loan_status = 'Current' THEN id END)) AS good_loan_applications FROM dbo.bank_loan_data;`                                                                           | ![good_loan_applications](./queries-ss-folder/good_loan_applications.png)                   |
| **Good Loan Funded Amount**        | `SELECT SUM(loan_amount) AS Good_loan_funded_Amount FROM dbo.bank_loan_data WHERE loan_status IN ('Fully Paid', 'Current');`                                                                                              | ![good_loan_funded_amount](./queries-ss-folder/good_loan_funded_amount.png)                 |
| **Good Loan Amount Received**      | `SELECT SUM(total_payment) AS 'Good_Loan_Amount_Received' FROM dbo.bank_loan_data WHERE loan_status IN ('Fully Paid', 'Current');`                                                                                         | ![good_loan_amount_received](./queries-ss-folder/good_loan_amount_received.png)             |
| **Bad Loan Percentage**            | `SELECT (COUNT(CASE WHEN loan_status='Charged Off' THEN id END)*100.0 / COUNT(id)) as 'Bad_Loan_Percentage' FROM dbo.bank_loan_data;`                                                                                      | ![bad_loan_percentage](./queries-ss-folder/bad_loan_percentage.png)                         |
| **Bad Loan Applications**          | `SELECT COUNT(id) as 'Bad_Loan_Applications' FROM dbo.bank_loan_data WHERE loan_status='Charged Off';`                                                                                                                  | ![bad_loan_applications](./queries-ss-folder/bad_loan_applications.png)                     |
| **Bad Loan Funded Amount**         | `SELECT SUM(loan_amount) AS 'Bad_loan_funded_Amount' FROM dbo.bank_loan_data WHERE loan_status='Charged Off';`                                                                                                          | ![bad_loan_funded_amount](./queries-ss-folder/bad_loan_funded_amount.png)                   |
| **Bad Loan Amount Received**       | `SELECT SUM(total_payment) Bad_Loan_Amount_Received FROM dbo.bank_loan_data WHERE loan_status='Charged Off';`                                                                                                            | ![bad_loan_amount_received](./queries-ss-folder/bad_loan_amount_received.png)               |
| **Loan Status**                     | `SELECT loan_status, COUNT(id) LoanCount, SUM(total_payment) Total_Amount_Received, SUM(loan_amount) Total_funded_Amount, AVG(int_rate)*100 avg_int_rate, AVG(dti)*100 avg_dti FROM dbo.bank_loan_data GROUP BY loan_status;`        | ![loan_status_1](./queries-ss-folder/loan_status_1.png)                                      |
| **Loan status**                     | `SELECT loan_status, SUM(total_payment) MTD_Amount_Received, SUM(loan_amount) MTD_funded_amount FROM dbo.bank_loan_data WHERE MONTH(issue_date) = (SELECT MONTH(MAX(issue_date)) FROM dbo.bank_loan_data) AND YEAR(issue_date) = (SELECT YEAR(MAX(issue_date)) FROM dbo.bank_loan_data) GROUP BY loan_status;` | ![loan_status_2](./queries-ss-folder/loan_status_2.png)                                      |
| **Month**    | `SELECT MONTH(issue_date) as Month_Number, DATENAME(mm, issue_date) AS Month_Name, COUNT(id) AS total_loan_applications, SUM(loan_amount) AS total_funded_Amount, SUM(total_payment) AS total_amount_received FROM dbo.bank_loan_data GROUP BY MONTH(issue_date), DATENAME(mm,issue_date) ORDER BY MONTH(issue_date);` | ![month_wise_details](./queries-ss-folder/month_wise_details.png)                           |
| **STATE**                           | `SELECT address_state AS State, count(id) as total_loan_applications, SUM(loan_amount) as total_funded_amount, SUM(total_payment) as total_amount_received FROM dbo.bank_loan_data GROUP BY address_state ORDER BY address_state;`        | ![statewise_details_1](./queries-ss-folder/statewise_details_1.png) ![state_wise_details_2](./queries-ss-folder/state_wise_details_2.png) |
| **Term**                            | `SELECT term as Term, COUNT(id) AS total_loan_applications, SUM(loan_amount) AS total_funded_amount, SUM(total_payment) AS total_amount_received FROM dbo.bank_loan_data GROUP BY term;`                                      | ![term_length_details](./queries-ss-folder/term_wise_details.png)                          |
| **EMPLOYEE LENGTH**                 | `SELECT emp_length AS Employee_Length, COUNT(id) as Total_loan_applications, SUM(loan_amount) AS total_amount_funded, SUM(total_payment) AS total_amount_received FROM dbo.bank_loan_data GROUP BY emp_length ORDER BY emp_length;`    | ![emp_length_details](./queries-ss-folder/emp_length_details.png)                           |
| **PURPOSE**                         | `SELECT purpose, COUNT(id) AS total_loan_Applications, SUM(loan_amount) as total_funded_amount, SUM(total_payment) as total_amount_received FROM dbo.bank_loan_data GROUP BY purpose ORDER BY purpose;`                        | ![purpose_wise_details](./queries-ss-folder/purpose_wise_details.png)                        |
| **Home Ownership**                  | `SELECT home_ownership, COUNT(id) AS total_loan_applications, SUM(loan_amount) as total_funded_amount, SUM(total_payment) as total_amount_received FROM dbo.bank_loan_data GROUP BY home_ownership ORDER BY home_ownership;`     | ![home_ownership_details](./queries-ss-folder/home_ownership_details.png)                   |


